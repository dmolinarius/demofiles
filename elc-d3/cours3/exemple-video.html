<!DOCTYPE html>
<html lang="fr">
  <title>Exemple vidéo</title>
  <link rel="stylesheet" href="exemple_style.css">
  <meta charset='utf-8'>
  <style>
video {
  border: 1px solid #444;
  border-radius: 3px;
  box-shadow: 5px 5px 5px #888;
  padding: 5px;
  background-color: white;
  margin-top:1.33em;
  margin-bottom: 2.66em;
}
pre {
  margin-left: 20px;
  padding: 1em;
  background-color: #eee;
}
</style>
<script src="script.js"></script>
<script>
  window.onload = function() {
    init_footer();
  }
</script>


 <h1>Exemple de document avec vidéo</h1>

<p style="text-align: center">
<video id="evolution" src="linux.ogg" controls="controls"></video>  
</p>
<script>
window.evolution.addEventListener('mousemove', function(e){
  var x = e.clientX - this.offsetWidth/2;
  var y = this.offsetHeight/2 - e.clientY;
  var diag = Math.atan(this.offsetWidth/this.offsetHeight);
  for ( let elt = this; elt.offsetParent; elt = elt.offsetParent ) {
    x -= elt.offsetLeft;
    y += elt.offsetTop;
  }
  if ( this.currentTime > 0 && this.currentTime < this.duration ) {
    let a = ((x ? Math.atan(y/x) : Math.PI/2) + (x > 0 ? 0 : Math.PI));
    if ( a > -diag && a < diag ) {
      this.style.transform = "rotateY(15deg)";
    }
    else if ( a < Math.PI - diag ) {
      this.style.transform = "rotateX(20deg)";
    }
    else if ( a < Math.PI + diag ) {
      this.style.transform = "rotateY(-15deg)";
    }
    else {
      this.style.transform = "rotateX(-20deg)";
    }
    this.parentNode.style.perspective = "500px";
  }
  else {
      this.style.transform = "rotateY(0)";
  }
});
</script>

<p>
 Voici le code javascript permettant d'obtenir les effets observés :
</p>
<pre>
window.evolution.addEventListener('mousemove', function(e){
  var x = e.clientX - this.offsetWidth/2;
  var y = this.offsetHeight/2 - e.clientY;
  var diag = Math.atan(this.offsetWidth/this.offsetHeight);
  for ( let elt = this; elt.offsetParent; elt = elt.offsetParent ) {
    x -= elt.offsetLeft;
    y += elt.offsetTop;
  }
  if ( this.currentTime &gt; 0 &amp;&amp; this.currentTime &lt; this.duration ) {
    let a = ((x ? Math.atan(y/x) : Math.PI/2) + (x > 0 ? 0 : Math.PI));
    if ( a &gt; -diag &amp;&amp; a &lt; diag ) {
      this.style.transform = "rotateY(15deg)";
    }
    else if ( a &lt; Math.PI - diag ) {
      this.style.transform = "rotateX(20deg)";
    }
    else if ( a &lt; Math.PI + diag ) {
      this.style.transform = "rotateY(-15deg)";
    }
    else {
      this.style.transform = "rotateX(-20deg)";
    }
    this.parentNode.style.perspective = "500px";
  }
  else {
      this.style.transform = "rotateY(0)";
  }
});
</pre>
 <p>
  La conformité de la
 <a id="online" href="http://dmolinarius.github.io/demofiles/elc-d3/cours3/exemple-video.html">version en ligne</a>
  de ce document au standard HTML peut être contrôlée grâce au lien porté par l'icône ci-dessous.

<div id="std-footer"></div>
